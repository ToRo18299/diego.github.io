---
import Layout from '../layouts/Layout.astro'
import Hero from '../components/Hero.astro'
import About from '../components/About.astro'
import Timeline from '../components/Timeline.astro'
import Projects from '../components/Projects.astro'
import Blog from '../components/Blog.astro'
import Hackathons from '../components/Hackathons.astro'
import Contact from '../components/Contact.astro'
import { Briefcase, GraduationCap } from '@lucide/astro'
import { getEntry, render } from 'astro:content'

import { siteConfig } from '../config'

// Load about content
const aboutEntry = await getEntry('about', 'about')
let AboutContent = null
if (aboutEntry) {
  const { Content } = await render(aboutEntry)
  AboutContent = Content
}
---

<Layout
  title={`${siteConfig.name} - Portfolio`}
  description={siteConfig.description}
>
  <main>
    <!-- Hero Section (Always visible) -->
    <section id='hero'>
      <Hero
        name={siteConfig.name}
        title={siteConfig.title}
        description={siteConfig.description}
        avatar={'https://raw.githubusercontent.com/ToRo18299/diego.github.io/main/public/foto_hv.jpg'}
        location={siteConfig.location}
        socialLinks={siteConfig.socialLinks}
      />
    </section>

    <!-- About Section -->
    {
      siteConfig.sections.about && aboutEntry && (
        <section id='about'>
          <About
            title={aboutEntry.data.title}
            photo={aboutEntry.data.photo}
            Content={AboutContent}
          />
        </section>
      )
    }

    <!-- Projects Section -->
    {
      siteConfig.sections.projects && (
        <section id='projects'>
          <Projects />
        </section>
      )
    }

    <!-- Skills & Tools Section -->
    {
      siteConfig.sections.blog && (
        <section id='blog'>
          <Blog sectionTitle='Skills & Tools' />
        </section>
      )
    }

    <!-- Work Experience Section -->
    {
      siteConfig.sections.work && (
        <section id='work'>
          <Timeline
            collection='work'
            variant='timeline'
            color='primary'
            icon={Briefcase}
            sectionTitle='Work Experience'
          />
        </section>
      )
    }

    <!-- Education Section -->
    {
      siteConfig.sections.education && (
        <section id='education'>
          <Timeline
            collection='education'
            variant='list'
            color='secondary'
            backgroundColor='base-300'
            icon={GraduationCap}
            sectionTitle='Education'
          />
        </section>
      )
    }

    <!-- Hackathons Section -->
    {
      siteConfig.sections.hackathons && (
        <section id='hackathons'>
          <Hackathons />
        </section>
      )
    }

    <!-- Contact Section -->
    {
      siteConfig.sections.contact && (
        <section id='contact'>
          <Contact />
        </section>
      )
    }
  </main>
</Layout>

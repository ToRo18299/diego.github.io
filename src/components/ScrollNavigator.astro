---
  // Este componente crea un bot√≥n flotante para navegar entre secciones
  const sections = [
    'hero',
    'about',
    'projects',
    'blog',
    'work',
    'education',
    'hackathons',
    'contact',
  ]
---

<style>
  #scroll-nav-btn {
    position: fixed;
    right: 1.5rem;
    bottom: 2.5rem;
    z-index: 50;
    background: var(--fallback-b1, #fff);
    color: var(--fallback-bc, #222);
    border-radius: 9999px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
    padding: 0.75rem;
    transition:
      background 0.2s,
      color 0.2s,
      transform 0.2s;
    cursor: pointer;
    outline: none;
    border: none;
    display: none;
  }

  #scroll-nav-btn:hover,
  #scroll-nav-btn:focus {
    background: var(--fallback-p, #2563eb);
    color: #fff;
    transform: scale(1.08);
  }

  #scroll-nav-btn svg {
    display: block;
  }
</style>

<button id="scroll-nav-btn" aria-label="Scroll navigation" data-dir="down">
  <svg
    id="arrow-down"
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M19 9l-7 7-7-7"
    />
  </svg>

  <svg
    id="arrow-up"
    style="display: none;"
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M5 15l7-7 7 7"
    />
  </svg>
</button>

<script is:inline>
  const sections = [
    'hero',
    'about',
    'projects',
    'blog',
    'work',
    'education',
    'hackathons',
    'contact',
  ];

  let currentSection = 0;

  function updateSection() {
    let found = 0;
    for (let i = 0; i < sections.length; i++) {
      const el = document.getElementById(sections[i]);
      if (el) {
        const rect = el.getBoundingClientRect();
        if (rect.top <= window.innerHeight * 0.3) {
          found = i;
        }
      }
    }
    currentSection = found;
    updateButton();
    updateArrow();
  }

  function scrollToSection(idx) {
    const el = document.getElementById(sections[idx]);
    if (el) {
      el.scrollIntoView({ behavior: 'smooth' });
    }
  }

  function updateButton() {
    const btn = document.getElementById('scroll-nav-btn');
    if (!btn) return;

    if (currentSection === 0) {
      btn.setAttribute('data-dir', 'down');
      btn.style.display = 'block';
    } else if (currentSection === sections.length - 1) {
      btn.setAttribute('data-dir', 'up');
      btn.style.display = 'block';
    } else {
      btn.setAttribute('data-dir', 'both');
      btn.style.display = 'block';
    }
  }

  function updateArrow() {
    const btn = document.getElementById('scroll-nav-btn');
    if (!btn) return;

    const dir = btn.getAttribute('data-dir');
    btn.querySelector('#arrow-down').style.display =
      dir === 'down' || dir === 'both' ? 'block' : 'none';
    btn.querySelector('#arrow-up').style.display =
      dir === 'up' ? 'block' : 'none';
  }

  function handleClick() {
    const btn = document.getElementById('scroll-nav-btn');
    const dir = btn.getAttribute('data-dir');

    if (dir === 'down') {
      scrollToSection(currentSection + 1);
    } else if (dir === 'up') {
      scrollToSection(currentSection - 1);
    } else {
      scrollToSection(currentSection + 1);
    }
  }

  window.addEventListener('scroll', updateSection);

  window.addEventListener('DOMContentLoaded', () => {
    updateSection();
    const btn = document.getElementById('scroll-nav-btn');
    if (btn) {
      btn.addEventListener('click', handleClick);
    }
  });
</script>
